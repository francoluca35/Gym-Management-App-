# Migraci√≥n a Supabase + Next.js ‚úÖ

## ‚úÖ Lo que se ha hecho:

1. **Configurado Next.js** con TypeScript y Tailwind CSS
2. **Configurado Supabase** - Cliente listo para usar
3. **Creado esquema SQL** - Tablas `gimnasios` y `gyms`
4. **Migrado componentes** - RegisterForm, AuthLoginForm, PreLogin
5. **Creado funciones de autenticaci√≥n** - registerGym y login usando Supabase

## üìã Pasos para completar la migraci√≥n:

### 1. Instalar dependencias

```bash
npm install
```

### 2. Configurar Supabase

1. Ve a [supabase.com](https://supabase.com) y crea una cuenta
2. Crea un nuevo proyecto
3. Ve a **Settings > API** y copia:
   - **Project URL** 
   - **anon/public key**

### 3. Crear archivo `.env.local`

En la ra√≠z del proyecto, crea `.env.local`:

```env
NEXT_PUBLIC_SUPABASE_URL=https://tu-proyecto.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=tu_anon_key_aqui
```

### 4. Crear las tablas en Supabase

1. Ve a **SQL Editor** en tu proyecto de Supabase
2. Copia y pega el contenido de `supabase/schema.sql`
3. Ejecuta el script
4. Verifica que se crearon las tablas `gimnasios` y `gyms`

### 5. Ejecutar el proyecto

```bash
npm run dev
```

Abre [http://localhost:3000](http://localhost:3000)

## üóÑÔ∏è Estructura de Base de Datos

### Tabla `gimnasios`
Guarda todos los datos de registro del gimnasio:
- `gym_id` (PRIMARY KEY) - ID √∫nico generado
- `nombre_gym` - Nombre del gimnasio
- `direccion`, `telefono`, `email`, `propietario`
- `ip_registro` - IP de la m√°quina donde se registr√≥
- `activo` - Estado del gimnasio
- Campos adicionales: `capacidad_maxima`, `horarios`, `tipos_clases`, `planes`, etc.

### Tabla `gyms`
Guarda los usuarios de cada gimnasio:
- `nombre_gym` (PRIMARY KEY) - Nombre del gimnasio
- `users` (JSONB) - Array con 4 usuarios:
  - 1 admin (con las credenciales del registro)
  - 3 empleados: `empleadoM`, `empleadoT`, `empleadoN` (password: `12345`)

## üéØ Ventajas de Supabase

‚úÖ **No necesitas servidor separado** - Todo funciona desde Next.js
‚úÖ **Base de datos PostgreSQL** - M√°s potente que MongoDB
‚úÖ **API REST autom√°tica** - Supabase genera las APIs
‚úÖ **Real-time** - Puedes agregar suscripciones en tiempo real
‚úÖ **Autenticaci√≥n integrada** - Si la necesitas despu√©s
‚úÖ **Storage** - Para guardar archivos/im√°genes
‚úÖ **M√°s f√°cil de configurar** - Solo necesitas las credenciales

## üìù Notas Importantes

- Las contrase√±as se hashean usando SHA-256 (puedes mejorar esto usando Supabase Auth despu√©s)
- La IP se obtiene desde el cliente usando una API externa
- Los componentes UI est√°n copiados y listos para usar
- El proyecto est√° listo para ejecutarse despu√©s de configurar Supabase

## üöÄ Pr√≥ximos pasos

1. Configura Supabase siguiendo los pasos arriba
2. Ejecuta `npm run dev`
3. Prueba el registro y login
4. Contin√∫a con el resto de la aplicaci√≥n (dashboard, etc.)
